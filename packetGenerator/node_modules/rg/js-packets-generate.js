'use strict';
let lineArgs = require("command-line-args");

let args = lineArgs([
	{name : "help", type : Boolean, alias : 'h', description : "Print usage instructions"},
	{name : "server", type : String, alias : 's', defaultOption : true, description : "Server packets file"},
	{name : "client", type : String, alias : 'c', defaultOption : true, description : "Client packets file"},
	{name : "template", type : String, alias : 't', defaultOption : true, description : "Template js file"},
	{name : "output", type : String, alias : 'o', defaultOption : true, description : "Output js file"}
]);

let options = args.parse();
var usage = args.getUsage({header: "Packet generator"});

options.server = options.server || './packets/server.packets';
options.client = options.client || './packets/client.packets';
options.template = options.template || './packets/.packets_template.js';
options.output = options.output || './packets/packets.js';

console.log(options.help ? usage : options);

let format = require('./format');
format.generatePackets(options.server, options.client, options.template, options.output);